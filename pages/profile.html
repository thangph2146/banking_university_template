<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#8B0000" />
    <title>Trang cá nhân - Đại học Ngân hàng TP.HCM</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="../public/css/custom.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script src="../public/js/tailwind.config.js"></script>
  </head>
  <body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-primary shadow-md sticky top-0 z-50 animate-fade-in">
      <div
        class="container mx-auto px-4 py-2 flex items-center justify-between"
      >
        <a href="index.html" class="text-2xl font-['Pacifico'] text-white transition-all duration-300 hover:scale-105">
            <img src="../images/logo/logo-white.png" alt="logo" class="w-12 h-12 md:w-16 md:h-16">
        </a>
        <nav class="hidden md:flex items-center space-x-8">
          <a
            href="index.html"
            class="font-medium text-white/80 hover:text-white transition-all duration-300 hover:-translate-y-1"
            >Trang chủ</a
          >
          <a href="events.html" class="font-medium text-white/80 hover:text-white transition-all duration-300 hover:-translate-y-1"
            >Sự kiện</a
          >
          <a href="blog.html" class="font-medium text-white/80 hover:text-white transition-all duration-300 hover:-translate-y-1"
          >Blog</a
          >
          <a href="news.html" class="font-medium text-white/80 hover:text-white transition-all duration-300 hover:-translate-y-1"
            >Giới thiệu</a
          >
          <a href="contact.html" class="font-medium text-white/80 hover:text-white transition-all duration-300 hover:-translate-y-1"
            >Liên hệ</a
          >
        </nav>
        <div class="flex items-center space-x-4">
          <!-- User profile dropdown menu -->
          <div class="relative group">
            <button class="flex items-center space-x-2 text-white">
              <img src="https://readdy.ai/api/search-image?query=professional%20headshot%20young%20vietnamese%20student%20minimal%20background&width=100&height=100&seq=avatar" alt="Ảnh đại diện" class="w-8 h-8 rounded-full border-2 border-white">
              <span class="hidden sm:block">Nguyễn Văn A</span>
              <i class="ri-arrow-down-s-line group-hover:rotate-180 transition-transform duration-300"></i>
            </button>
            <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg overflow-hidden z-20 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform origin-top-right scale-95 group-hover:scale-100">
              <div class="py-2">
                <a href="profile.html" class="flex items-center px-4 py-2 text-sm text-gray-800 hover:bg-primary/10 hover:text-primary border-l-4 border-primary">
                  <i class="ri-user-line mr-2"></i>
                  Trang cá nhân
                </a>
                <a href="registered-events.html" class="flex items-center px-4 py-2 text-sm text-gray-800 hover:bg-primary/10 hover:text-primary">
                  <i class="ri-calendar-event-line mr-2"></i>
                  Sự kiện của tôi
                </a>
                <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-800 hover:bg-primary/10 hover:text-primary">
                  <i class="ri-settings-4-line mr-2"></i>
                  Cài đặt
                </a>
                <hr class="my-1 border-gray-200">
                <a href="login.html" class="flex items-center px-4 py-2 text-sm text-gray-800 hover:bg-primary/10 hover:text-primary">
                  <i class="ri-logout-box-r-line mr-2"></i>
                  Đăng xuất
                </a>
              </div>
            </div>
          </div>
        </div>
        <button id="mobile-menu-button"
          class="md:hidden w-10 h-10 flex items-center justify-center text-white focus:outline-none hover:text-secondary transition-colors"
        >
          <i class="ri-menu-line ri-lg"></i>
        </button>
      </div>
      
      <!-- Mobile Navigation (hidden by default) -->
      <div id="mobile-menu" class="hidden md:hidden bg-primary/95 fixed inset-0 z-50 transform translate-x-full transition-transform duration-300 ease-in-out backdrop-blur-sm">
        <div class="p-4 flex justify-between items-center border-b border-red-900/30">
          <a href="index.html" class="text-2xl font-pacifico text-white flex items-center">
            <img src="../images/logo/logo-white-vertical.png" alt="Đại học Ngân hàng TP.HCM logo" class="w-12 h-12">
          </a>
          <button class="w-10 h-10 flex items-center justify-center text-white" aria-label="Đóng menu">
            <i class="ri-close-line ri-lg"></i>
          </button>
        </div>
        <div class="p-4 border-b border-red-900/30 flex items-center">
          <img src="https://readdy.ai/api/search-image?query=professional%20headshot%20young%20vietnamese%20student%20minimal%20background&width=100&height=100&seq=avatar" alt="Ảnh đại diện" class="w-12 h-12 rounded-full border-2 border-white mr-3">
          <div>
            <div class="text-white font-medium">Nguyễn Văn A</div>
            <div class="text-red-200 text-sm">Sinh viên</div>
          </div>
        </div>
        <nav class="p-4" aria-label="Mobile navigation">
          <ul class="space-y-4">
            <li><a href="index.html" class="font-medium text-white/80 hover:text-white py-2 block transition-all duration-300 hover:translate-x-1">Trang chủ</a></li>
            <li><a href="events.html" class="font-medium text-white/80 hover:text-white py-2 block transition-all duration-300 hover:translate-x-1">Sự kiện</a></li>
            <li><a href="news.html" class="font-medium text-white/80 hover:text-white py-2 block transition-all duration-300 hover:translate-x-1">Giới thiệu</a></li>
            <li><a href="contact.html" class="font-medium text-white/80 hover:text-white py-2 block transition-all duration-300 hover:translate-x-1">Liên hệ</a></li>
            <li><a href="profile.html" class="font-medium text-white border-l-4 border-white pl-2 py-2 block transition-all duration-300 hover:translate-x-1" aria-current="page">Trang cá nhân</a></li>
            <li><a href="registered-events.html" class="font-medium text-white/80 hover:text-white py-2 block transition-all duration-300 hover:translate-x-1">Sự kiện của tôi</a></li>
            <li><a href="#" class="font-medium text-white/80 hover:text-white py-2 block transition-all duration-300 hover:translate-x-1">Cài đặt</a></li>
            <li class="pt-4">
              <a href="login.html" class="bg-white text-primary px-4 py-2 !rounded-button whitespace-nowrap block text-center hover:bg-gray-100 transition-colors shadow-sm">
                <i class="ri-logout-box-r-line mr-2"></i>Đăng xuất
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Page Title / Hero Section -->
    <section class="bg-primary text-white py-10 md:py-14">
      <div class="container mx-auto px-4 text-center" data-aos="fade-up" data-aos-duration="800">
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4 relative inline-block">
          Trang cá nhân
          <span class="absolute -bottom-2 left-0 w-full h-1 bg-white/40 rounded"></span>
        </h1>
        <p class="max-w-2xl mx-auto text-red-100 text-base md:text-lg">
          Quản lý thông tin cá nhân và theo dõi các sự kiện đã đăng ký
        </p>
      </div>
    </section>

    <!-- Profile Content -->
    <section class="py-8 md:py-12 bg-white">
      <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row gap-6 md:gap-8">
          <!-- Sidebar -->
          <div class="w-full md:w-1/4">
            <div class="bg-gray-50 rounded-lg p-6 shadow-sm sticky top-24">
              <!-- Profile Avatar with enhanced upload functionality -->
              <div class="text-center mb-6">
                <div class="relative mx-auto w-32 h-32 mb-4 image-preview" id="avatarContainer">
                  <img 
                    src="https://readdy.ai/api/search-image?query=professional%20headshot%20young%20vietnamese%20student%20minimal%20background&width=200&height=200&seq=avatar-lg" 
                    alt="Ảnh đại diện" 
                    class="w-full h-full object-cover rounded-full border-4 border-primary/20"
                    id="profileAvatar"
                  >
                  <div class="overlay rounded-full">
                    <span class="text-white text-sm">Thay đổi ảnh</span>
                  </div>
                  <label class="absolute bottom-0 right-0 bg-primary text-white rounded-full p-2 shadow-md hover:bg-primary/90 transition-all file-input-label">
                    <i class="ri-camera-line"></i>
                    <input type="file" accept="image/*" id="avatarUpload" class="hidden">
                  </label>
                </div>
                <h2 class="text-xl font-bold text-gray-800">Nguyễn Văn A</h2>
                <p class="text-gray-600">Sinh viên</p>
                <div class="mt-2 flex justify-center items-center">
                  <span class="bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full flex items-center">
                    <span class="w-2 h-2 bg-green-500 rounded-full mr-1"></span>
                    Đã xác thực
                  </span>
                </div>
              </div>
              
              <!-- Navigation Menu -->
              <nav class="space-y-1">
                <a href="#thong-tin" class="flex items-center space-x-2 px-3 py-2 rounded-md bg-primary/10 text-primary font-medium">
                  <i class="ri-user-3-line"></i>
                  <span>Thông tin cá nhân</span>
                </a>
                <a href="#su-kien" class="flex items-center space-x-2 px-3 py-2 rounded-md text-gray-700 hover:bg-primary/5 hover:text-primary transition-colors">
                  <i class="ri-calendar-event-line"></i>
                  <span>Sự kiện đã đăng ký</span>
                </a>
                <a href="#chung-chi" class="flex items-center space-x-2 px-3 py-2 rounded-md text-gray-700 hover:bg-primary/5 hover:text-primary transition-colors">
                  <i class="ri-award-line"></i>
                  <span>Chứng chỉ hoạt động</span>
                </a>
                <a href="#doi-mat-khau" class="flex items-center space-x-2 px-3 py-2 rounded-md text-gray-700 hover:bg-primary/5 hover:text-primary transition-colors">
                  <i class="ri-lock-password-line"></i>
                  <span>Đổi mật khẩu</span>
                </a>
              </nav>
              
              <div class="mt-6 pt-6 border-t border-gray-200">
                <a
                  href="login.html"
                  class="flex items-center justify-center w-full bg-gray-200 text-gray-800 px-4 py-2 rounded-button hover:bg-gray-300 transition-colors shadow-sm"
                >
                  <i class="ri-logout-box-r-line mr-2"></i>
                  Đăng xuất
                </a>
              </div>
            </div>
          </div>
          
          <!-- Main Content -->
          <div class="w-full md:w-3/4">
            <!-- Personal Information Section -->
            <div id="thong-tin" class="bg-white rounded-lg shadow-sm p-6 mb-6" data-aos="fade-up" data-aos-duration="800">
              <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800 flex items-center">
                  <i class="ri-user-3-line mr-2 text-primary"></i>
                  Thông tin cá nhân
                </h3>
                <button id="editProfileBtn" class="text-primary hover:text-primary/80 font-medium flex items-center">
                  <i class="ri-edit-line mr-1"></i>
                  Chỉnh sửa
                </button>
              </div>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <h4 class="text-sm font-medium text-gray-500 mb-1">Họ và tên</h4>
                  <p class="text-gray-800">Nguyễn Văn A</p>
                </div>
                
                <div>
                  <h4 class="text-sm font-medium text-gray-500 mb-1">Mã số sinh viên</h4>
                  <p class="text-gray-800">1951012345</p>
                </div>
                
                <div>
                  <h4 class="text-sm font-medium text-gray-500 mb-1">Email</h4>
                  <p class="text-gray-800">nguyenvana@sv.hub.edu.vn</p>
                </div>
                
                <div>
                  <h4 class="text-sm font-medium text-gray-500 mb-1">Số điện thoại</h4>
                  <p class="text-gray-800">0901234567</p>
                </div>
                
                <div>
                  <h4 class="text-sm font-medium text-gray-500 mb-1">Ngày sinh</h4>
                  <p class="text-gray-800">01/01/2001</p>
                </div>
                
                <div>
                  <h4 class="text-sm font-medium text-gray-500 mb-1">Giới tính</h4>
                  <p class="text-gray-800">Nam</p>
                </div>
                
                <div>
                  <h4 class="text-sm font-medium text-gray-500 mb-1">Khoa</h4>
                  <p class="text-gray-800">Quản trị kinh doanh</p>
                </div>
                
                <div>
                  <h4 class="text-sm font-medium text-gray-500 mb-1">Chuyên ngành</h4>
                  <p class="text-gray-800">Tài chính ngân hàng</p>
                </div>
              </div>
              
              <div class="mt-6 pt-6 border-t border-gray-200">
                <h4 class="text-sm font-medium text-gray-500 mb-1">Địa chỉ</h4>
                <p class="text-gray-800">123 Nguyễn Đình Chiểu, Phường 5, Quận 3, TP.HCM</p>
              </div>
            </div>

            <!-- Registered Events Section -->
            <div id="su-kien" class="bg-white rounded-lg shadow-sm p-6 mb-6" data-aos="fade-up" data-aos-duration="800">
              <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800 flex items-center">
                  <i class="ri-calendar-event-line mr-2 text-primary"></i>
                  Sự kiện đã đăng ký
                </h3>
                <a href="events.html" class="text-primary hover:text-primary/80 font-medium flex items-center">
                  <i class="ri-add-line mr-1"></i>
                  Khám phá sự kiện
                </a>
              </div>
              
              <!-- Events List -->
              <div class="space-y-4">
                <!-- Event Item 1 -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow group">
                  <div class="flex flex-col md:flex-row gap-4">
                    <div class="md:w-1/4">
                      <div class="aspect-video md:aspect-square rounded-lg overflow-hidden">
                        <img 
                          src="https://readdy.ai/api/search-image?query=A%20professional%20conference%20setup%20with%20students%20in%20formal%20attire%2C%20presentation%20screens%2C%20university%20branding%2C%20business%20atmosphere%2C%20clean%20modern%20venue&width=300&height=200&seq=event1" 
                          alt="Hội thảo Ngân hàng số"
                          class="w-full h-full object-cover object-center transition-transform duration-500 group-hover:scale-105"
                        >
                      </div>
                    </div>
                    <div class="md:w-3/4">
                      <div class="flex flex-col md:flex-row md:items-center justify-between gap-2 mb-2">
                        <div>
                          <span class="text-xs font-medium text-primary bg-blue-50 px-2 py-1 rounded-full">Hội thảo</span>
                          <span class="text-xs font-medium bg-green-100 text-green-700 px-2 py-1 rounded-full ml-2">Đã xác nhận</span>
                        </div>
                        <div class="text-sm text-gray-600 flex items-center">
                          <i class="ri-calendar-line mr-1"></i>
                          15/04/2025
                          <span class="mx-2">•</span>
                          <i class="ri-time-line mr-1"></i>
                          14:00 - 17:00
                        </div>
                      </div>
                      <h4 class="text-lg font-bold text-gray-800 mb-1 group-hover:text-primary transition-colors">Hội thảo Ngân hàng số và Tương lai Thanh toán</h4>
                      <p class="text-gray-600 text-sm mb-3 line-clamp-2">Tìm hiểu về xu hướng công nghệ mới nhất trong lĩnh vực ngân hàng và các giải pháp thanh toán tương lai.</p>
                      <div class="flex items-center justify-between">
                        <div class="flex items-center text-gray-600 text-sm">
                          <i class="ri-map-pin-line mr-1"></i>
                          Hội trường A
                        </div>
                        <div class="flex gap-2">
                          <a href="#" class="text-primary font-medium text-sm hover:underline">Chi tiết</a>
                          <span class="text-gray-300">|</span>
                          <button class="text-red-600 font-medium text-sm hover:underline">Hủy đăng ký</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Event Item 2 -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow group">
                  <div class="flex flex-col md:flex-row gap-4">
                    <div class="md:w-1/4">
                      <div class="aspect-video md:aspect-square rounded-lg overflow-hidden">
                        <img 
                          src="https://readdy.ai/api/search-image?query=University%20job%20fair%20with%20company%20booths%2C%20students%20in%20smart%20casual%20attire%2C%20networking%2C%20professional%20atmosphere%2C%20bright%20indoor%20venue%20with%20university%20banners&width=300&height=200&seq=event2" 
                          alt="Ngày hội việc làm"
                          class="w-full h-full object-cover object-center transition-transform duration-500 group-hover:scale-105"
                        >
                      </div>
                    </div>
                    <div class="md:w-3/4">
                      <div class="flex flex-col md:flex-row md:items-center justify-between gap-2 mb-2">
                        <div>
                          <span class="text-xs font-medium text-primary bg-blue-50 px-2 py-1 rounded-full">Tuyển dụng</span>
                          <span class="text-xs font-medium bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full ml-2">Chờ xác nhận</span>
                        </div>
                        <div class="text-sm text-gray-600 flex items-center">
                          <i class="ri-calendar-line mr-1"></i>
                          20/04/2025
                          <span class="mx-2">•</span>
                          <i class="ri-time-line mr-1"></i>
                          08:00 - 17:00
                        </div>
                      </div>
                      <h4 class="text-lg font-bold text-gray-800 mb-1 group-hover:text-primary transition-colors">Ngày hội Việc làm Ngành Tài chính - Ngân hàng 2025</h4>
                      <p class="text-gray-600 text-sm mb-3 line-clamp-2">Cơ hội gặp gỡ và phỏng vấn trực tiếp với hơn 50 doanh nghiệp hàng đầu trong lĩnh vực tài chính - ngân hàng.</p>
                      <div class="flex items-center justify-between">
                        <div class="flex items-center text-gray-600 text-sm">
                          <i class="ri-map-pin-line mr-1"></i>
                          Sân trường
                        </div>
                        <div class="flex gap-2">
                          <a href="#" class="text-primary font-medium text-sm hover:underline">Chi tiết</a>
                          <span class="text-gray-300">|</span>
                          <button class="text-red-600 font-medium text-sm hover:underline">Hủy đăng ký</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="mt-6 text-center">
                <a href="#" class="inline-flex items-center text-primary font-medium hover:text-secondary transition-colors group">
                  Xem tất cả sự kiện đã đăng ký
                  <i class="ri-arrow-right-line ml-1 group-hover:translate-x-1 transition-transform"></i>
                </a>
              </div>
            </div>

            <!-- Certificates Section -->
            <div id="chung-chi" class="bg-white rounded-lg shadow-sm p-6 mb-6" data-aos="fade-up" data-aos-duration="800">
              <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800 flex items-center">
                  <i class="ri-award-line mr-2 text-primary"></i>
                  Chứng chỉ hoạt động
                </h3>
              </div>
              
              <!-- Certificate List -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Certificate 1 -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow flex">
                  <div class="mr-4 text-primary text-4xl">
                    <i class="ri-file-pdf-line"></i>
                  </div>
                  <div>
                    <h4 class="text-base font-bold text-gray-800 mb-1">Chứng nhận tham gia Hội thảo Tài chính quốc tế</h4>
                    <p class="text-gray-600 text-sm mb-2">Tham gia đầy đủ và hoàn thành hội thảo</p>
                    <div class="flex items-center justify-between">
                      <div class="text-xs text-gray-500">Ngày cấp: 10/01/2025</div>
                      <a href="#" class="text-primary text-sm hover:underline flex items-center">
                        <i class="ri-download-line mr-1"></i>
                        Tải xuống
                      </a>
                    </div>
                  </div>
                </div>
                
                <!-- Certificate 2 -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow flex">
                  <div class="mr-4 text-primary text-4xl">
                    <i class="ri-file-pdf-line"></i>
                  </div>
                  <div>
                    <h4 class="text-base font-bold text-gray-800 mb-1">Chứng nhận tham gia Workshop Đầu tư chứng khoán</h4>
                    <p class="text-gray-600 text-sm mb-2">Hoàn thành khóa học với thành tích xuất sắc</p>
                    <div class="flex items-center justify-between">
                      <div class="text-xs text-gray-500">Ngày cấp: 15/02/2025</div>
                      <a href="#" class="text-primary text-sm hover:underline flex items-center">
                        <i class="ri-download-line mr-1"></i>
                        Tải xuống
                      </a>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="mt-6 text-center">
                <p class="text-gray-600 text-sm">Bạn sẽ nhận được chứng chỉ sau khi tham gia đầy đủ các sự kiện và hoàn thành yêu cầu của ban tổ chức.</p>
              </div>
            </div>

            <!-- Password Change Section -->
            <div id="doi-mat-khau" class="bg-white rounded-lg shadow-sm p-6 mb-6" data-aos="fade-up" data-aos-duration="800">
              <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800 flex items-center">
                  <i class="ri-lock-password-line mr-2 text-primary"></i>
                  Đổi mật khẩu
                </h3>
              </div>
              
              <form id="passwordChangeForm" class="max-w-lg mx-auto">
                <div class="mb-4">
                  <label for="currentPassword" class="block text-sm font-medium text-gray-700 mb-1">Mật khẩu hiện tại <span class="text-red-500">*</span></label>
                  <div class="relative">
                    <input 
                      type="password" 
                      id="currentPassword" 
                      name="currentPassword" 
                      required
                      class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
                      placeholder="Nhập mật khẩu hiện tại"
                    >
                    <button type="button" class="absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700">
                      <i class="ri-eye-off-line"></i>
                    </button>
                  </div>
                </div>
                
                <div class="mb-4">
                  <label for="newPassword" class="block text-sm font-medium text-gray-700 mb-1">Mật khẩu mới <span class="text-red-500">*</span></label>
                  <div class="relative">
                    <input 
                      type="password" 
                      id="newPassword" 
                      name="newPassword" 
                      required
                      class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
                      placeholder="Nhập mật khẩu mới"
                    >
                    <button type="button" class="absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700">
                      <i class="ri-eye-off-line"></i>
                    </button>
                  </div>
                  <div class="mt-1 text-xs text-gray-500">
                    Mật khẩu phải có ít nhất 8 ký tự, bao gồm chữ hoa, chữ thường, số và ký tự đặc biệt
                  </div>
                  <div id="passwordStrength" class="mt-2 hidden">
                    <div class="h-1 w-full bg-gray-200 rounded-full overflow-hidden">
                      <div id="passwordStrengthBar" class="h-full bg-gray-500 transition-all duration-300"></div>
                    </div>
                    <div class="flex justify-between mt-1 text-xs">
                      <span>Yếu</span>
                      <span>Trung bình</span>
                      <span>Mạnh</span>
                    </div>
                  </div>
                </div>
                
                <div class="mb-6">
                  <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Xác nhận mật khẩu mới <span class="text-red-500">*</span></label>
                  <div class="relative">
                    <input 
                      type="password" 
                      id="confirmPassword" 
                      name="confirmPassword" 
                      required
                      class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
                      placeholder="Nhập lại mật khẩu mới"
                    >
                    <button type="button" class="absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700">
                      <i class="ri-eye-off-line"></i>
                    </button>
                  </div>
                </div>
                
                <div class="text-center">
                  <button 
                    type="submit"
                    id="changePasswordBtn"
                    class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-button text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all duration-300 transform hover:scale-105"
                  >
                    <span class="mr-2">Cập nhật mật khẩu</span>
                    <i class="ri-save-line"></i>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center modal backdrop-blur-sm">
      <div class="modal-content bg-white rounded-lg w-full max-w-3xl mx-4">
        <div class="flex justify-between items-center border-b border-gray-200 px-6 py-4">
          <h3 class="text-xl font-bold text-gray-800">Chỉnh sửa thông tin cá nhân</h3>
          <button id="closeProfileModal" class="text-gray-500 hover:text-gray-700">
            <i class="ri-close-line text-2xl"></i>
          </button>
        </div>
        
        <form id="editProfileForm" class="px-6 py-4">
          <div class="mb-6">
            <div class="flex justify-center">
              <div class="relative w-32 h-32 image-preview">
                <img 
                  src="https://readdy.ai/api/search-image?query=professional%20headshot%20young%20vietnamese%20student%20minimal%20background&width=200&height=200&seq=avatar-lg" 
                  alt="Ảnh đại diện" 
                  class="w-full h-full object-cover rounded-full border-4 border-primary/20"
                  id="modalProfileAvatar"
                >
                <div class="overlay rounded-full">
                  <span class="text-white text-sm">Thay đổi ảnh</span>
                </div>
                <label class="absolute bottom-0 right-0 bg-primary text-white rounded-full p-2 shadow-md hover:bg-primary/90 transition-all file-input-label">
                  <i class="ri-camera-line"></i>
                  <input type="file" accept="image/*" id="modalAvatarUpload" class="hidden">
                </label>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div>
              <label for="fullName" class="block text-sm font-medium text-gray-700 mb-1">Họ và tên <span class="text-red-500">*</span></label>
              <input 
                type="text" 
                id="fullName" 
                name="fullName" 
                value="Nguyễn Văn A"
                required
                class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
              >
            </div>
            
            <div>
              <label for="studentId" class="block text-sm font-medium text-gray-700 mb-1">Mã số sinh viên</label>
              <input 
                type="text" 
                id="studentId" 
                name="studentId" 
                value="1951012345"
                readonly
                class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md bg-gray-50 cursor-not-allowed"
              >
              <span class="text-xs text-gray-500">Mã số sinh viên không thể thay đổi</span>
            </div>
            
            <div>
              <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email <span class="text-red-500">*</span></label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                value="nguyenvana@sv.hub.edu.vn"
                required
                class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
              >
            </div>
            
            <div>
              <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Số điện thoại</label>
              <input 
                type="tel" 
                id="phone" 
                name="phone" 
                value="0901234567"
                class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
              >
            </div>
            
            <div>
              <label for="birthDate" class="block text-sm font-medium text-gray-700 mb-1">Ngày sinh</label>
              <input 
                type="date" 
                id="birthDate" 
                name="birthDate" 
                value="2001-01-01"
                class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
              >
            </div>
            
            <div>
              <label for="gender" class="block text-sm font-medium text-gray-700 mb-1">Giới tính</label>
              <select 
                id="gender" 
                name="gender" 
                class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
              >
                <option value="nam" selected>Nam</option>
                <option value="nu">Nữ</option>
                <option value="khac">Khác</option>
              </select>
            </div>
            
            <div>
              <label for="faculty" class="block text-sm font-medium text-gray-700 mb-1">Khoa</label>
              <select 
                id="faculty" 
                name="faculty" 
                class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
              >
                <option value="qtkinhdoanh" selected>Quản trị kinh doanh</option>
                <option value="taichinh">Tài chính</option>
                <option value="ketoan">Kế toán - Kiểm toán</option>
                <option value="luatkinhdoanh">Luật kinh doanh</option>
                <option value="nganhang">Ngân hàng</option>
                <option value="cntt">Công nghệ thông tin</option>
              </select>
            </div>
            
            <div>
              <label for="major" class="block text-sm font-medium text-gray-700 mb-1">Chuyên ngành</label>
              <select 
                id="major" 
                name="major" 
                class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
              >
                <option value="taichinh-nganhang" selected>Tài chính ngân hàng</option>
                <option value="qtkinhdoanh">Quản trị kinh doanh</option>
                <option value="marketing">Marketing</option>
                <option value="thuongmai">Thương mại điện tử</option>
                <option value="kinhte">Kinh tế quốc tế</option>
              </select>
            </div>
          </div>
          
          <div class="mb-6">
            <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Địa chỉ</label>
            <textarea 
              id="address" 
              name="address" 
              rows="3"
              class="w-full px-4 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
            >123 Nguyễn Đình Chiểu, Phường 5, Quận 3, TP.HCM</textarea>
          </div>
          
          <div class="flex justify-end gap-3">
            <button type="button" id="cancelEditProfile" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-button hover:bg-gray-200 transition-colors">
              Hủy
            </button>
            <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-primary rounded-button hover:bg-primary/90 transition-colors flex items-center">
              <i class="ri-save-line mr-1"></i>
              Lưu thay đổi
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-primary text-red-100 py-8 md:py-12 relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-b from-primary to-primary/90"></div>
      <div class="container mx-auto px-3 md:px-4 relative z-10">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 md:gap-8">
          <div>
            <a href="index.html" class="text-xl md:text-2xl font-pacifico text-white mb-3 md:mb-4 block flex items-center">
              <img src="../images/logo/logo-white.png" alt="Đại học Ngân hàng TP.HCM logo" class="w-16 h-16 md:w-32 md:h-32">
            </a>
            <p class="mb-3 md:mb-4 text-sm md:text-base">
              Hệ thống Quản lý Sự kiện Đại học Ngân hàng TP.HCM - Nơi kết nối
              sinh viên với các hoạt động học thuật và ngoại khóa.
            </p>
            <div class="flex space-x-3 md:space-x-4">
              <a
                href="#"
                class="w-8 h-8 md:w-10 md:h-10 flex items-center justify-center bg-red-900/50 rounded-full hover:bg-white hover:text-primary transition-colors"
                aria-label="Facebook"
              >
                <i class="ri-facebook-fill text-sm md:text-base"></i>
              </a>
              <a
                href="#"
                class="w-8 h-8 md:w-10 md:h-10 flex items-center justify-center bg-red-900/50 rounded-full hover:bg-white hover:text-primary transition-colors"
                aria-label="YouTube"
              >
                <i class="ri-youtube-fill text-sm md:text-base"></i>
              </a>
              <a
                href="#"
                class="w-8 h-8 md:w-10 md:h-10 flex items-center justify-center bg-red-900/50 rounded-full hover:bg-white hover:text-primary transition-colors"
                aria-label="Instagram"
              >
                <i class="ri-instagram-fill text-sm md:text-base"></i>
              </a>
            </div>
          </div>
          <div>
            <h3 class="text-white text-lg font-bold mb-4">Liên kết nhanh</h3>
            <ul class="space-y-2">
              <li>
                <a href="index.html" class="hover:text-white transition-colors inline-flex items-center">
                  <i class="ri-arrow-right-s-line mr-2"></i>Trang chủ</a
                >
              </li>
              <li>
                <a href="events.html" class="hover:text-white transition-colors inline-flex items-center">
                  <i class="ri-arrow-right-s-line mr-2"></i>Sự kiện</a
                >
              </li>
              <li>
                <a href="login.html" class="hover:text-white transition-colors inline-flex items-center">
                  <i class="ri-arrow-right-s-line mr-2"></i>Đăng nhập</a
                >
              </li>
              <li>
                <a href="register.html" class="hover:text-white transition-colors inline-flex items-center">
                  <i class="ri-arrow-right-s-line mr-2"></i>Đăng ký</a
                >
              </li>
              <li>
                <a href="news.html" class="hover:text-white transition-colors inline-flex items-center">
                  <i class="ri-arrow-right-s-line mr-2"></i>Giới thiệu</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h3 class="text-white text-lg font-bold mb-4">Hỗ trợ</h3>
            <ul class="space-y-2">
              <li>
                <a href="user-guide.html" class="hover:text-white transition-colors inline-flex items-center">
                  <i class="ri-arrow-right-s-line mr-2"></i>Hướng dẫn sử dụng</a
                >
              </li>
              <li>
                <a href="faq.html" class="hover:text-white transition-colors inline-flex items-center">
                  <i class="ri-arrow-right-s-line mr-2"></i>Câu hỏi thường gặp</a
                >
              </li>
              <li>
                <a href="privacy.html" class="hover:text-white transition-colors inline-flex items-center">
                  <i class="ri-arrow-right-s-line mr-2"></i>Chính sách bảo mật</a
                >
              </li>
              <li>
                <a href="terms.html" class="hover:text-white transition-colors inline-flex items-center">
                  <i class="ri-arrow-right-s-line mr-2"></i>Điều khoản sử dụng</a
                >
              </li>
              <li>
                <a href="contact.html" class="hover:text-white transition-colors inline-flex items-center">
                  <i class="ri-arrow-right-s-line mr-2"></i>Liên hệ hỗ trợ</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h3 class="text-white text-lg font-bold mb-4">Liên hệ</h3>
            <ul class="space-y-3">
              <li class="flex items-start">
                <div class="w-5 h-5 flex items-center justify-center mr-2 mt-1 text-red-200">
                  <i class="ri-map-pin-line"></i>
                </div>
                <span
                  >36 Tôn Thất Đạm, Phường Nguyễn Thái Bình, Quận 1,
                  TP.HCM</span
                >
              </li>
              <li class="flex items-center">
                <div class="w-5 h-5 flex items-center justify-center mr-2 text-red-200">
                  <i class="ri-phone-line"></i>
                </div>
                <span>(028) 3829 1901</span>
              </li>
              <li class="flex items-center">
                <div class="w-5 h-5 flex items-center justify-center mr-2 text-red-200">
                  <i class="ri-mail-line"></i>
                </div>
                <span>info@hub.edu.vn</span>
              </li>
            </ul>
            <div class="mt-4 p-4 bg-red-900/30 rounded-lg">
              <h4 class="text-white font-medium mb-2">Đăng ký nhận tin</h4>
              <form class="flex">
                <input type="email" placeholder="Email của bạn" class="px-3 py-2 rounded-l-button text-sm w-full focus:outline-none text-gray-700" />
                <button type="submit" class="bg-primary border border-white text-white px-3 py-2 rounded-r-button hover:bg-red-800 transition-colors">
                  <i class="ri-send-plane-fill"></i>
                </button>
              </form>
            </div>
          </div>
        </div>
        <div class="border-t border-red-900/30 mt-8 pt-6 text-center">
          <p>
            &copy; 2025 Đại học Ngân hàng TP.HCM. Tất cả quyền được bảo lưu.
          </p>
        </div>
      </div>
    </footer>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      // Initialize AOS
      document.addEventListener("DOMContentLoaded", function () {
        AOS.init({
          duration: 800,
          once: false,
          mirror: true,
          offset: 50
        });

        // Mobile menu toggle functionality
        const menuButton = document.getElementById("mobile-menu-button");
        const mobileMenu = document.getElementById("mobile-menu");
        const closeButton = mobileMenu.querySelector("button[aria-label='Đóng menu']");

        // Open menu
        menuButton.addEventListener("click", function () {
          mobileMenu.classList.remove("translate-x-full");
          document.body.classList.add("overflow-hidden");
          menuButton.setAttribute("aria-expanded", "true");
          
          // Toggle icon between menu and close
          const icon = menuButton.querySelector("i");
          if (icon) {
            icon.className = "ri-close-line ri-lg";
          }
        });
        
        // Close menu
        closeButton.addEventListener("click", function () {
          mobileMenu.classList.add("translate-x-full");
          document.body.classList.remove("overflow-hidden");
          menuButton.setAttribute("aria-expanded", "false");
          
          const icon = menuButton.querySelector("i");
          if (icon) {
            icon.className = "ri-menu-line ri-lg";
          }
        });

        // Close menu when clicking outside
        document.addEventListener("click", function (e) {
          if (!mobileMenu.contains(e.target) && !menuButton.contains(e.target) && !mobileMenu.classList.contains("translate-x-full")) {
            mobileMenu.classList.add("translate-x-full");
            document.body.classList.remove("overflow-hidden");
            menuButton.setAttribute("aria-expanded", "false");
            const icon = menuButton.querySelector("i");
            if (icon) {
              icon.className = "ri-menu-line ri-lg";
            }
          }
        });

        // Close menu on escape key
        document.addEventListener("keydown", function (e) {
          if (e.key === "Escape" && !mobileMenu.classList.contains("translate-x-full")) {
            mobileMenu.classList.add("translate-x-full");
            document.body.classList.remove("overflow-hidden");
            menuButton.setAttribute("aria-expanded", "false");
            const icon = menuButton.querySelector("i");
            if (icon) {
              icon.className = "ri-menu-line ri-lg";
            }
          }
        });
        
        // Password visibility toggle
        const togglePasswordButtons = document.querySelectorAll('.relative button');
        
        togglePasswordButtons.forEach(button => {
          button.addEventListener('click', function() {
            const input = this.previousElementSibling;
            const icon = this.querySelector('i');
            
            if (input.type === 'password') {
              input.type = 'text';
              icon.className = 'ri-eye-line';
            } else {
              input.type = 'password';
              icon.className = 'ri-eye-off-line';
            }
          });
        });
        
        // Smooth scrolling for sidebar navigation
        document.querySelectorAll('.sticky a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', function (e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            
            if (targetElement) {
              // Update active class on sidebar links
              document.querySelectorAll('.sticky a').forEach(link => {
                link.classList.remove('bg-primary/10', 'text-primary');
                link.classList.add('text-gray-700', 'hover:bg-primary/5', 'hover:text-primary');
              });
              
              this.classList.remove('text-gray-700', 'hover:bg-primary/5', 'hover:text-primary');
              this.classList.add('bg-primary/10', 'text-primary');
              
              // Scroll to target with offset for header
              window.scrollTo({
                top: targetElement.offsetTop - 100,
                behavior: 'smooth'
              });
            }
          });
        });

        // Profile edit functionality
        const editProfileBtn = document.getElementById('editProfileBtn');
        const editProfileModal = document.getElementById('editProfileModal');
        const closeProfileModal = document.getElementById('closeProfileModal');
        const cancelEditProfile = document.getElementById('cancelEditProfile');
        const editProfileForm = document.getElementById('editProfileForm');
        
        // Form fields for validation
        const fullNameField = document.getElementById('fullName');
        const emailField = document.getElementById('email');
        const phoneField = document.getElementById('phone');
        const submitButton = editProfileForm.querySelector('button[type="submit"]');
        const originalSubmitHtml = submitButton.innerHTML;
        
        // Helper function to show validation error
        function showError(element, message) {
          // Remove any existing error message
          const existingErrorMsg = element.parentElement.querySelector('.invalid-feedback');
          if (existingErrorMsg) {
            existingErrorMsg.remove();
          }
          
          // Add error class to input
          element.classList.add('is-invalid');
          
          // Create error message
          const errorMsg = document.createElement('div');
          errorMsg.className = 'invalid-feedback';
          errorMsg.textContent = message;
          
          // Insert error message after input
          element.parentElement.appendChild(errorMsg);
        }
        
        // Helper function to clear validation error
        function clearError(element) {
          element.classList.remove('is-invalid');
          const errorMsg = element.parentElement.querySelector('.invalid-feedback');
          if (errorMsg) {
            errorMsg.remove();
          }
        }
        
        // Helper function to validate form
        function validateForm() {
          let isValid = true;
          
          // Validate full name
          if (!fullNameField.value.trim()) {
            showError(fullNameField, 'Họ và tên không được để trống');
            isValid = false;
          } else if (fullNameField.value.trim().length < 3) {
            showError(fullNameField, 'Họ và tên phải có ít nhất 3 ký tự');
            isValid = false;
          } else {
            clearError(fullNameField);
          }
          
          // Validate email
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailField.value.trim()) {
            showError(emailField, 'Email không được để trống');
            isValid = false;
          } else if (!emailRegex.test(emailField.value.trim())) {
            showError(emailField, 'Email không đúng định dạng');
            isValid = false;
          } else {
            clearError(emailField);
          }
          
          // Validate phone number (optional)
          const phoneRegex = /^(0|\+84)[3|5|7|8|9][0-9]{8}$/;
          if (phoneField.value.trim() && !phoneRegex.test(phoneField.value.trim())) {
            showError(phoneField, 'Số điện thoại không đúng định dạng (0xxxxxxxxx)');
            isValid = false;
          } else {
            clearError(phoneField);
          }
          
          return isValid;
        }
        
        // Event listeners for validation on input
        fullNameField.addEventListener('input', () => {
          if (fullNameField.value.trim()) {
            clearError(fullNameField);
          }
        });
        
        emailField.addEventListener('input', () => {
          if (emailField.value.trim()) {
            clearError(emailField);
          }
        });
        
        phoneField.addEventListener('input', () => {
          if (phoneField.value.trim()) {
            clearError(phoneField);
          }
        });
        
        // Helper function to show toast notifications
        function showToast(type, message) {
          // Remove any existing toast
          const existingToast = document.querySelector('.toast');
          if (existingToast) {
            existingToast.remove();
          }
          
          // Create new toast element
          const toast = document.createElement('div');
          toast.className = 'toast shadow-lg rounded-lg overflow-hidden';
          
          // Set background color based on type
          let bgColor, icon;
          if (type === 'success') {
            bgColor = 'bg-green-100';
            icon = '<i class="ri-check-line mr-2 text-green-600"></i>';
          } else if (type === 'error') {
            bgColor = 'bg-red-100';
            icon = '<i class="ri-error-warning-line mr-2 text-red-600"></i>';
          } else if (type === 'warning') {
            bgColor = 'bg-yellow-100';
            icon = '<i class="ri-alert-line mr-2 text-yellow-600"></i>';
          } else {
            bgColor = 'bg-blue-100';
            icon = '<i class="ri-information-line mr-2 text-blue-600"></i>';
          }
          
          // Create toast content
          toast.innerHTML = `
            <div class="flex items-center justify-between ${bgColor} text-gray-800 p-4">
              <div class="flex items-center">
                ${icon}
                <span>${message}</span>
              </div>
              <button class="ml-4 text-gray-500 hover:text-gray-700 focus:outline-none">
                <i class="ri-close-line"></i>
              </button>
            </div>
          `;
          
          // Add toast to document
          document.body.appendChild(toast);
          
          // Add event listener to close button
          toast.querySelector('button').addEventListener('click', () => {
            toast.classList.add('hide');
            setTimeout(() => {
              toast.remove();
            }, 300);
          });
          
          // Auto hide after 5 seconds
          setTimeout(() => {
            toast.classList.add('hide');
            setTimeout(() => {
              toast.remove();
            }, 300);
          }, 5000);
        }
        
        // Handle form submission with enhanced validation and improved success/error handling
        editProfileForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // Validate form with enhanced validation
          if (!validateForm()) {
            // Add shake animation to invalid inputs
            document.querySelectorAll('.is-invalid').forEach(input => {
              input.classList.add('animate-shake');
              setTimeout(() => {
                input.classList.remove('animate-shake');
              }, 500);
            });
            
            showToast('warning', 'Vui lòng điền đầy đủ thông tin cần thiết.');
            return;
          }
          
          // Show loading state
          submitButton.disabled = true;
          submitButton.innerHTML = `
            <div class="flex items-center">
              <div class="spinner mr-2"></div>
              <span>Đang xử lý...</span>
            </div>
          `;
          
          // Get form data
          const formData = new FormData(this);
          
          // Simulate API call with random success/failure (for demo purposes)
          setTimeout(() => {
            // Generate random number between 0 and 100
            const randomNum = Math.floor(Math.random() * 100);
            
            // 80% chance of success, 20% chance of different errors
            if (randomNum < 80) {
              // Success case
              // Update displayed information
              document.querySelector('#thong-tin .grid div:nth-child(1) p').textContent = formData.get('fullName');
              document.querySelector('#thong-tin .grid div:nth-child(3) p').textContent = formData.get('email');
              document.querySelector('#thong-tin .grid div:nth-child(4) p').textContent = formData.get('phone') || '(Chưa cập nhật)';
              
              // Format date for display (from YYYY-MM-DD to DD/MM/YYYY)
              const birthDate = formData.get('birthDate');
              if (birthDate) {
                const parts = birthDate.split('-');
                const formattedDate = `${parts[2]}/${parts[1]}/${parts[0]}`;
                document.querySelector('#thong-tin .grid div:nth-child(5) p').textContent = formattedDate;
              }
              
              // Update gender, faculty, major (would need to map values to display text)
              const genderSelect = document.getElementById('gender');
              const genderText = genderSelect.options[genderSelect.selectedIndex].text;
              document.querySelector('#thong-tin .grid div:nth-child(6) p').textContent = genderText;
              
              const facultySelect = document.getElementById('faculty');
              const facultyText = facultySelect.options[facultySelect.selectedIndex].text;
              document.querySelector('#thong-tin .grid div:nth-child(7) p').textContent = facultyText;
              
              const majorSelect = document.getElementById('major');
              const majorText = majorSelect.options[majorSelect.selectedIndex].text;
              document.querySelector('#thong-tin .grid div:nth-child(8) p').textContent = majorText;
              
              // Update address
              document.querySelector('#thong-tin .mt-6 p').textContent = formData.get('address') || '(Chưa cập nhật)';
              
              // Update name in header, sidebar and mobile menu
              const newName = formData.get('fullName');
              document.querySelector('.sidebar h2').textContent = newName;
              document.querySelector('.group button span').textContent = newName;
              document.querySelector('#mobile-menu .text-white.font-medium').textContent = newName;
              
              // Close modal with animation before showing toast
              closeModal();
              
              // Show success message after modal closing animation completes
              setTimeout(() => {
                showToast('success', 'Cập nhật thông tin thành công');
              }, 300);
              
            } else if (randomNum < 90) {
              // Server error
              showToast('error', 'Có lỗi xảy ra khi cập nhật thông tin. Vui lòng thử lại sau.');
            } else if (randomNum < 95) {
              // Validation error with more specific feedback
              showToast('warning', 'Email đã được sử dụng bởi tài khoản khác.');
              showError(emailField, 'Email đã được sử dụng bởi tài khoản khác');
              emailField.classList.add('animate-shake');
              setTimeout(() => {
                emailField.classList.remove('animate-shake');
              }, 500);
            } else {
              // Network error with more descriptive message
              showToast('error', 'Không thể kết nối đến máy chủ. Vui lòng kiểm tra kết nối mạng của bạn.');
            }
            
            // Reset button state
            submitButton.disabled = false;
            submitButton.innerHTML = originalSubmitHtml;
          }, 1500); // Simulate network delay
        });
        
        // Password change form validation
        const passwordChangeForm = document.getElementById('passwordChangeForm');
        const currentPasswordField = document.getElementById('currentPassword');
        const newPasswordField = document.getElementById('newPassword');
        const confirmPasswordField = document.getElementById('confirmPassword');
        const changePasswordBtn = document.getElementById('changePasswordBtn');
        const passwordStrength = document.getElementById('passwordStrength');
        const passwordStrengthBar = document.getElementById('passwordStrengthBar');
        
        // Show/hide password toggle
        const passwordToggleButtons = document.querySelectorAll('.relative button');
        passwordToggleButtons.forEach(button => {
          button.addEventListener('click', function() {
            const input = this.previousElementSibling;
            const icon = this.querySelector('i');
            
            if (input.type === 'password') {
              input.type = 'text';
              icon.className = 'ri-eye-line';
            } else {
              input.type = 'password';
              icon.className = 'ri-eye-off-line';
            }
          });
        });
        
        // Function to check password strength
        function checkPasswordStrength(password) {
          let strength = 0;
          
          // If password length is less than 6, return 0
          if (password.length < 6) {
            return 0;
          }
          
          // If password length is >= 8
          if (password.length >= 8) {
            strength += 1;
          }
          
          // If password contains lowercase and uppercase letters
          if (password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)) {
            strength += 1;
          }
          
          // If password contains numbers and characters
          if (password.match(/([a-zA-Z])/) && password.match(/([0-9])/)) {
            strength += 1;
          }
          
          // If password contains special characters
          if (password.match(/([!,%,&,@,#,$,^,*,?,_,~])/)) {
            strength += 1;
          }
          
          return strength;
        }
        
        // Update password strength meter
        newPasswordField.addEventListener('input', function() {
          const password = this.value;
          
          if (password) {
            passwordStrength.classList.remove('hidden');
            
            const strength = checkPasswordStrength(password);
            
            // Update strength bar width and color
            switch(strength) {
              case 0:
                passwordStrengthBar.style.width = '25%';
                passwordStrengthBar.className = 'h-full bg-red-500 transition-all duration-300';
                break;
              case 1:
                passwordStrengthBar.style.width = '25%';
                passwordStrengthBar.className = 'h-full bg-red-500 transition-all duration-300';
                break;
              case 2:
                passwordStrengthBar.style.width = '50%';
                passwordStrengthBar.className = 'h-full bg-yellow-500 transition-all duration-300';
                break;
              case 3:
                passwordStrengthBar.style.width = '75%';
                passwordStrengthBar.className = 'h-full bg-yellow-500 transition-all duration-300';
                break;
              case 4:
                passwordStrengthBar.style.width = '100%';
                passwordStrengthBar.className = 'h-full bg-green-500 transition-all duration-300';
                break;
            }
          } else {
            passwordStrength.classList.add('hidden');
          }
        });
        
        // Validate password change form
        passwordChangeForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          let isValid = true;
          
          // Validate current password
          if (!currentPasswordField.value.trim()) {
            showError(currentPasswordField, 'Vui lòng nhập mật khẩu hiện tại');
            isValid = false;
          } else {
            clearError(currentPasswordField);
          }
          
          // Validate new password with more extensive requirements
          if (!newPasswordField.value.trim()) {
            showError(newPasswordField, 'Vui lòng nhập mật khẩu mới');
            isValid = false;
          } else if (newPasswordField.value.length < 8) {
            showError(newPasswordField, 'Mật khẩu phải có ít nhất 8 ký tự');
            isValid = false;
          } else if (checkPasswordStrength(newPasswordField.value) < 3) {
            showError(newPasswordField, 'Mật khẩu quá yếu. Vui lòng sử dụng chữ hoa, chữ thường, số và ký tự đặc biệt');
            isValid = false;
          } else if (newPasswordField.value === currentPasswordField.value) {
            showError(newPasswordField, 'Mật khẩu mới không được trùng với mật khẩu hiện tại');
            isValid = false;
          } else {
            clearError(newPasswordField);
          }
          
          // Validate confirm password
          if (!confirmPasswordField.value.trim()) {
            showError(confirmPasswordField, 'Vui lòng xác nhận mật khẩu mới');
            isValid = false;
          } else if (confirmPasswordField.value !== newPasswordField.value) {
            showError(confirmPasswordField, 'Mật khẩu xác nhận không khớp');
            isValid = false;
          } else {
            clearError(confirmPasswordField);
          }
          
          if (!isValid) {
            // Add shake animation to invalid inputs
            document.querySelectorAll('.is-invalid').forEach(input => {
              input.classList.add('animate-shake');
              setTimeout(() => {
                input.classList.remove('animate-shake');
              }, 500);
            });
            
            showToast('warning', 'Vui lòng kiểm tra lại thông tin nhập');
            return;
          }
          
          // Show loading state
          const originalBtnHtml = changePasswordBtn.innerHTML;
          changePasswordBtn.disabled = true;
          changePasswordBtn.innerHTML = `
            <div class="flex items-center">
              <div class="spinner mr-2"></div>
              <span>Đang xử lý...</span>
            </div>
          `;
          
          // Simulate API call with expanded random outcomes
          setTimeout(() => {
            // Generate random number for success/failure with more varied scenarios
            const randomNum = Math.floor(Math.random() * 100);
            
            if (randomNum < 70) {
              // Success
              showToast('success', 'Cập nhật mật khẩu thành công!');
              
              // Reset form
              passwordChangeForm.reset();
              passwordStrength.classList.add('hidden');
              
            } else if (randomNum < 80) {
              // Current password incorrect
              showToast('error', 'Mật khẩu hiện tại không chính xác.');
              showError(currentPasswordField, 'Mật khẩu hiện tại không chính xác');
              currentPasswordField.classList.add('animate-shake');
              setTimeout(() => {
                currentPasswordField.classList.remove('animate-shake');
              }, 500);
              
            } else if (randomNum < 85) {
              // New password was recently used
              showToast('warning', 'Mật khẩu mới đã được sử dụng gần đây. Vui lòng chọn mật khẩu khác.');
              showError(newPasswordField, 'Mật khẩu đã được sử dụng gần đây');
              newPasswordField.classList.add('animate-shake');
              setTimeout(() => {
                newPasswordField.classList.remove('animate-shake');
              }, 500);
              
            } else if (randomNum < 90) {
              // Account locked due to too many password change attempts
              showToast('error', 'Tài khoản tạm thời bị khóa do thay đổi mật khẩu quá nhiều lần. Vui lòng thử lại sau 30 phút.');
              
            } else if (randomNum < 95) {
              // Server error with more specific message
              showToast('error', 'Máy chủ đang bận, không thể xử lý yêu cầu. Vui lòng thử lại sau.');
              
            } else {
              // Network error with connection suggestion
              showToast('error', 'Không thể kết nối đến máy chủ. Vui lòng kiểm tra kết nối mạng và thử lại.');
            }
            
            // Reset button state
            changePasswordBtn.disabled = false;
            changePasswordBtn.innerHTML = originalBtnHtml;
          }, 1500);
        });
        
        // Avatar upload functionality
        const avatarUpload = document.getElementById('avatarUpload');
        const modalAvatarUpload = document.getElementById('modalAvatarUpload');
        const profileAvatar = document.getElementById('profileAvatar');
        const modalProfileAvatar = document.getElementById('modalProfileAvatar');
        const avatarContainer = document.getElementById('avatarContainer');
        
        // Make avatar container clickable to trigger file input
        if (avatarContainer) {
          avatarContainer.addEventListener('click', function(e) {
            // Don't trigger if clicking on the camera button (which has its own input)
            if (!e.target.closest('label')) {
              avatarUpload.click();
            }
          });
        }
        
        // Function to handle image upload
        function handleImageUpload(file) {
          if (!file) {
            return;
          }
          
          // Enhanced validation with more detailed error messages
          // Validate file type
          const validTypes = ['image/jpeg', 'image/png', 'image/jpg', 'image/gif'];
          if (!validTypes.includes(file.type)) {
            showToast('error', 'Định dạng file không hợp lệ. Vui lòng chọn file hình ảnh (JPG, PNG, GIF)');
            return;
          }
          
          // Validate file size with clearer error message
          const maxSize = 2 * 1024 * 1024; // 2MB in bytes
          if (file.size > maxSize) {
            showToast('error', 'Dung lượng ảnh vượt quá giới hạn cho phép (tối đa 2MB)');
            return;
          }
          
          // Simulate loading state for avatar update
          const loadingOverlay = document.createElement('div');
          loadingOverlay.className = 'absolute inset-0 bg-black/60 rounded-full flex items-center justify-center z-10';
          loadingOverlay.innerHTML = '<div class="spinner border-2 border-white/30 border-t-white w-8 h-8"></div>';
          
          const profileAvatarContainer = profileAvatar.parentElement;
          profileAvatarContainer.style.position = 'relative';
          profileAvatarContainer.appendChild(loadingOverlay);
          
          // Preview image with potential failure cases
          const reader = new FileReader();
          
          reader.onload = function(e) {
            // Simulate API upload with random success/failure
            setTimeout(() => {
              // Remove loading overlay
              loadingOverlay.remove();
              
              // Generate random number for success/failure scenarios
              const randomNum = Math.floor(Math.random() * 100);
              
              if (randomNum < 75) {
                // Success case
                const imageUrl = e.target.result;
                
                // Update all avatar instances
                if (profileAvatar) profileAvatar.src = imageUrl;
                if (modalProfileAvatar) modalProfileAvatar.src = imageUrl;
                
                // Update header and mobile menu avatars
                const headerAvatar = document.querySelector('.group button img');
                const mobileAvatar = document.querySelector('#mobile-menu .w-12.h-12');
                
                if (headerAvatar) headerAvatar.src = imageUrl;
                if (mobileAvatar) mobileAvatar.src = imageUrl;
                
                // Show success message
                showToast('success', 'Tải ảnh đại diện thành công!');
                
              } else if (randomNum < 85) {
                // Image processing error
                showToast('error', 'Không thể xử lý hình ảnh. Vui lòng thử lại với hình ảnh khác.');
                
              } else if (randomNum < 90) {
                // File corrupted
                showToast('error', 'File hình ảnh bị hỏng. Vui lòng chọn hình ảnh khác.');
                
              } else if (randomNum < 95) {
                // Server quota exceeded
                showToast('warning', 'Bạn đã đạt giới hạn số lần thay đổi ảnh đại diện trong ngày. Vui lòng thử lại sau.');
                
              } else {
                // Network error
                showToast('error', 'Lỗi kết nối. Vui lòng kiểm tra kết nối mạng và thử lại.');
              }
            }, 1500); // Simulate upload delay
          };
          
          reader.onerror = function() {
            // Remove loading overlay
            loadingOverlay.remove();
            
            // Show error message for file reading error
            showToast('error', 'Không thể đọc file. File có thể bị hỏng hoặc không hợp lệ.');
          };
          
          reader.readAsDataURL(file);
        }
        
        // Event listeners for avatar uploads
        avatarUpload.addEventListener('change', function(e) {
          handleImageUpload(this.files[0]);
        });
        
        if (modalAvatarUpload) {
          modalAvatarUpload.addEventListener('change', function(e) {
            handleImageUpload(this.files[0]);
          });
        }
        
        // Updated modal functionality
        editProfileBtn.addEventListener('click', function() {
          editProfileModal.classList.add('show');
          document.body.style.overflow = 'hidden';
        });
        
        // Close modal with fixed functionality
        function closeModal() {
          editProfileModal.classList.remove('show');
          document.body.style.overflow = '';
        }
        
        // Add event listeners for closing modal
        closeProfileModal.addEventListener('click', closeModal);
        cancelEditProfile.addEventListener('click', closeModal);
        
        // Close when clicking outside of modal content
        editProfileModal.addEventListener('click', function(e) {
          if (e.target === editProfileModal) {
            closeModal();
          }
        });
        
        // Close on escape key
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && editProfileModal.classList.contains('show')) {
            closeModal();
          }
        });
      });
    </script>
  </body>
</html> 